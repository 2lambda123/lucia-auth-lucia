---
import type { Page } from 'src/nav';

interface Props {
    title: string
    pages: Page[]
}

function isSelected(href: string, currentPathname: string): boolean {
	if (removeLeadingSlash(href) === removeLeadingSlash(currentPathname)) {
		return true;
	}
	return currentPathname.startsWith(removeLeadingSlash(href) + "/");
}

function removeLeadingSlash(s: string): string {
	if (s.endsWith("/")) {
		return s.split("/").slice(0, -1).join("/");
	}
	return s;
}
---

<section class="text-sm">
    <h2 class="mb-1 font-medium">{Astro.props.title}</h2>
    <ul>
        {Astro.props.pages.map((page) => {
            return (
                <li class="my-1">
                    <a
                        class:list={[
                            "hover:underline",
                            {
                                "text-zinc-600": !isSelected(page[1], Astro.url.pathname),
                                "text-main": isSelected(page[1], Astro.url.pathname)
                            }
                        ]}
                        href={page[1]}
                    >
                        {page[2] === "code" ? <code>{page[0]}</code> : page[0]}
                    </a>
                </li>
            );
        })}
    </ul>
</section>